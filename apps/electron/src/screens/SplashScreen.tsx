import React, { useEffect } from "react";
import { useNavigate } from "react-router-dom";

import { getGoogleProfile } from "../services/google-profile.service";
import { useGoogleProfileStore } from "../store/googleProfileStore";
import { ElectronWindow } from "../types/window.types";

declare let window: ElectronWindow;

const SplashScreen: React.FC = () => {
  const { profile, setGoogleProfile } = useGoogleProfileStore();
  const navigate = useNavigate();

  useEffect(() => {
    if (!profile) {
      window.electronAPI.getGoogleToken().then(async (googleToken) => {
        if (googleToken) {
          const { data } = await getGoogleProfile(googleToken);
          console.log({
            label: "FETCHED_GOOGLE_PROFILE",
            data,
          });
          setGoogleProfile(data);
          navigate("/dashboard");
        }
      });
    }
  }, []);

  return (
    <div
      style={{
        height: "100%",
        width: "100%",
      }}
    >
      <div
        style={{
          backgroundColor: "rgb(32, 32, 32)",
          minHeight: "100vh",
          display: "grid",
          width: "100%",
          placeItems: "center",
          backgroundSize: "cover",
          backgroundPosition: "center",
        }}
      >
        <div style={{ width: "500px" }}>
          <div style={{ width: "500px", color: "rgb(210, 210, 210)" }}>
            <svg
              width="500px"
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              fill="currentColor"
              stroke="currentColor"
              viewBox="0 0 1000 1000"
            >
              <g transform="matrix(0.7,0,0,0.7,149.57576073365095,440.8141744631835)">
                <svg
                  viewBox="0 0 396 67"
                  preserveAspectRatio="xMidYMid meet"
                  height="169"
                  width="1000"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g
                    id="tight-bounds"
                    transform="matrix(1,0,0,1,0.23999821353459083,0.0202900335308982)"
                  >
                    <svg
                      viewBox="0 0 395.52 66.95941993293822"
                      height="66.95941993293822"
                      width="395.52"
                    >
                      <g>
                        <svg
                          viewBox="0 0 489.8407960832553 82.92742608521303"
                          height="66.95941993293822"
                          width="395.52"
                        >
                          <g transform="matrix(1,0,0,1,0,11.461026325814537)">
                            <svg
                              viewBox="0 0 395.52 60.005373433583955"
                              height="60.005373433583955"
                              width="395.52"
                            >
                              <g id="textblocktransform">
                                <svg
                                  viewBox="0 0 395.52 60.005373433583955"
                                  height="60.005373433583955"
                                  width="395.52"
                                  id="textblock"
                                >
                                  <g>
                                    <svg
                                      viewBox="0 0 395.52 60.005373433583955"
                                      height="60.005373433583955"
                                      width="395.52"
                                    >
                                      <g transform="matrix(1,0,0,1,0,0)">
                                        <svg
                                          width="395.52"
                                          viewBox="3.0999999046325684 -36 299.2200012207031 45.400001525878906"
                                          height="60.005373433583955"
                                          data-palette-color="#db924b"
                                        >
                                          <path
                                            d="M17.2-34.8Q21.2-34.8 24.2-33.15 27.2-31.5 28.83-28.43 30.45-25.35 30.45-21.15L30.45-21.15 25.55-21.15Q25.55-25.5 23.4-27.93 21.25-30.35 17.2-30.35L17.2-30.35Q12.7-30.35 10.35-27.58 8-24.8 8-19.4L8-19.4 8-14.9Q8-9.55 10.3-6.75 12.6-3.95 17.1-3.95L17.1-3.95Q21.3-3.95 23.53-6.35 25.75-8.75 25.75-13.05L25.75-13.05 30.45-13.05Q30.45-8.9 28.83-5.85 27.2-2.8 24.2-1.15 21.2 0.5 17.2 0.5L17.2 0.5Q10.55 0.5 6.83-3.58 3.1-7.65 3.1-14.9L3.1-14.9 3.1-19.4Q3.1-26.6 6.83-30.7 10.55-34.8 17.2-34.8L17.2-34.8ZM37.5-36L42.2-36 42.2 0 37.5 0 37.5-36ZM60.9-26.05Q66.25-26.05 69.45-22.75 72.65-19.45 72.65-13.7L72.65-13.7 72.65-11.85Q72.65-6.1 69.5-2.8 66.34 0.5 60.9 0.5L60.9 0.5Q55.45 0.5 52.3-2.8 49.15-6.1 49.15-11.85L49.15-11.85 49.15-13.7Q49.15-19.45 52.34-22.75 55.55-26.05 60.9-26.05L60.9-26.05ZM60.9-22.3Q57.55-22.3 55.7-20 53.84-17.7 53.84-13.25L53.84-13.25 53.84-12.3Q53.84-7.95 55.67-5.6 57.5-3.25 60.9-3.25L60.9-3.25Q64.2-3.25 66.07-5.58 67.95-7.9 67.95-12.3L67.95-12.3 67.95-13.25Q67.95-17.6 66.12-19.95 64.3-22.3 60.9-22.3L60.9-22.3ZM100.74-25.55L100.74-5Q100.74-4.1 101.14-3.68 101.54-3.25 102.14-3.25L102.14-3.25Q103.24-3.25 104.39-3.95L104.39-3.95 104.39-0.5Q102.84 0.5 101.24 0.5L101.24 0.5Q98.54 0.5 97.47-0.6 96.39-1.7 96.29-3.7L96.29-3.7Q94.94-1.7 92.82-0.6 90.69 0.5 87.94 0.5L87.94 0.5Q84.09 0.5 81.62-1.78 79.14-4.05 79.14-8.35L79.14-8.35 79.14-25.55 83.84-25.55 83.84-9.2Q83.84-3.25 89.24-3.25L89.24-3.25Q90.99-3.25 92.57-4.2 94.14-5.15 95.09-6.78 96.04-8.4 96.04-10.35L96.04-10.35 96.04-25.55 100.74-25.55ZM131.14-36L131.14 0 127.64 0Q127.29-1.6 126.99-3.5L126.99-3.5Q124.14 0.5 119.09 0.5L119.09 0.5Q114.29 0.5 111.52-3.05 108.74-6.6 108.74-12.8L108.74-12.8 108.74-13.35Q108.74-19.2 111.47-22.63 114.19-26.05 119.09-26.05L119.09-26.05Q123.84-26.05 126.44-22.3L126.44-22.3 126.44-36 131.14-36ZM119.94-22.3Q116.59-22.3 115.02-19.98 113.44-17.65 113.44-12.75L113.44-12.75Q113.44-7.85 115.04-5.55 116.64-3.25 119.94-3.25L119.94-3.25Q126.49-3.25 126.49-12.75L126.49-12.75Q126.49-17.65 124.84-19.98 123.19-22.3 119.94-22.3L119.94-22.3ZM166.89-34.3Q169.79-34.3 172.14-33 174.49-31.7 175.81-29.43 177.14-27.15 177.14-24.3L177.14-24.3Q177.14-21.45 175.81-19.18 174.49-16.9 172.14-15.6 169.79-14.3 166.89-14.3L166.89-14.3 156.99-14.3 156.99 0 152.09 0 152.09-34.3 166.89-34.3ZM166.44-29.85L156.99-29.85 156.99-18.75 166.44-18.75Q168.79-18.75 170.51-20.38 172.24-22 172.24-24.3L172.24-24.3Q172.24-26.65 170.51-28.25 168.79-29.85 166.44-29.85L166.44-29.85ZM182.73-36L187.63-36 187.63-31.65 182.73-31.65 182.73-36ZM182.83-25.55L187.53-25.55 187.53 0 182.83 0 182.83-25.55ZM219.23-30.15Q219.23-27.6 217.88-25.88 216.53-24.15 214.13-23.65L214.13-23.65 214.03-23.5Q216.53-21.3 216.53-18L216.53-18Q216.53-14.4 213.83-12.2 211.13-10 206.48-10L206.48-10 203.08-10Q201.58-10 200.58-9.22 199.58-8.45 199.58-7.25L199.58-7.25Q199.58-6.05 200.53-5.35 201.48-4.65 203.08-4.65L203.08-4.65 212.73-4.65Q215.68-4.65 217.46-2.8 219.23-0.95 219.23 1.9L219.23 1.9Q219.23 5.3 216.66 7.35 214.08 9.4 209.73 9.4L209.73 9.4 199.68 9.4Q197.98 9.4 196.56 8.5 195.13 7.6 194.31 6.23 193.48 4.85 193.48 3.4L193.48 3.4Q193.48 1.3 194.5-0.25 195.53-1.8 197.23-2.55L197.23-2.55Q194.93-3.95 194.93-6.7L194.93-6.7Q194.93-8.5 195.98-9.8 197.03-11.1 198.93-11.75L198.93-11.75Q195.58-13.6 195.58-18L195.58-18Q195.58-21.7 198.31-23.88 201.03-26.05 205.88-26.05L205.88-26.05 206.08-26.05Q208.88-26.05 211.18-25.2L211.18-25.2Q214.73-26.95 215.23-30.15L215.23-30.15 219.23-30.15ZM206.03-22.3Q203.38-22.3 201.81-21.28 200.23-20.25 200.23-18L200.23-18Q200.23-15.75 201.81-14.75 203.38-13.75 206.03-13.75L206.03-13.75Q208.68-13.75 210.28-14.75 211.88-15.75 211.88-18L211.88-18Q211.88-20.25 210.28-21.28 208.68-22.3 206.03-22.3L206.03-22.3ZM211.33-0.15L201.03-0.15Q199.83-0.15 198.98 0.7 198.13 1.55 198.13 2.75L198.13 2.75Q198.13 3.95 198.98 4.8 199.83 5.65 201.03 5.65L201.03 5.65 210.68 5.65Q212.28 5.65 213.43 4.73 214.58 3.8 214.58 2.6L214.58 2.6Q214.58 1.35 213.73 0.6 212.88-0.15 211.33-0.15L211.33-0.15ZM234.48-26.05Q237.63-26.05 240.05-24.73 242.48-23.4 243.83-20.95 245.18-18.5 245.18-15.25L245.18-15.25 245.18-11.7 227.33-11.7Q227.43-7.65 229.23-5.45 231.03-3.25 234.58-3.25L234.58-3.25Q237.73-3.25 239.23-5.1 240.73-6.95 240.73-9.5L240.73-9.5 245.18-9.5Q245.18-6.5 243.8-4.25 242.43-2 240-0.75 237.58 0.5 234.48 0.5L234.48 0.5 234.28 0.5Q228.88 0.5 225.75-2.98 222.63-6.45 222.63-12.25L222.63-12.25 222.63-13.25Q222.63-17.05 224.03-19.95 225.43-22.85 228.03-24.45 230.63-26.05 234.13-26.05L234.13-26.05 234.48-26.05ZM234.23-22.3Q231.38-22.3 229.6-20.55 227.83-18.8 227.43-15.35L227.43-15.35 240.53-15.35 240.53-15.95Q240.53-18.8 238.8-20.55 237.08-22.3 234.23-22.3L234.23-22.3ZM262.23-26.05Q267.58-26.05 270.78-22.75 273.98-19.45 273.98-13.7L273.98-13.7 273.98-11.85Q273.98-6.1 270.83-2.8 267.68 0.5 262.23 0.5L262.23 0.5Q256.78 0.5 253.63-2.8 250.48-6.1 250.48-11.85L250.48-11.85 250.48-13.7Q250.48-19.45 253.68-22.75 256.88-26.05 262.23-26.05L262.23-26.05ZM262.23-22.3Q258.88-22.3 257.03-20 255.18-17.7 255.18-13.25L255.18-13.25 255.18-12.3Q255.18-7.95 257-5.6 258.83-3.25 262.23-3.25L262.23-3.25Q265.53-3.25 267.4-5.58 269.28-7.9 269.28-12.3L269.28-12.3 269.28-13.25Q269.28-17.6 267.45-19.95 265.63-22.3 262.23-22.3L262.23-22.3ZM293.32-26.05Q297.52-26.05 299.92-23.8 302.32-21.55 302.32-17.2L302.32-17.2 302.32 0 297.62 0 297.62-16.35Q297.62-22.3 292.22-22.3L292.22-22.3Q290.42-22.3 288.87-21.35 287.32-20.4 286.37-18.78 285.42-17.15 285.42-15.2L285.42-15.2 285.42 0 280.72 0 280.72-25.55 284.12-25.55 284.77-21.8Q287.97-26.05 293.32-26.05L293.32-26.05Z"
                                            opacity="1"
                                            transform="matrix(1,0,0,1,0,0)"
                                            data-fill-palette-color="primary"
                                            id="text-0"
                                          ></path>
                                        </svg>
                                      </g>
                                    </svg>
                                  </g>
                                </svg>
                              </g>
                            </svg>
                          </g>
                          <g transform="matrix(1,0,0,1,409.68582853870674,0)">
                            <svg
                              viewBox="0 0 80.15496754454861 82.92742608521303"
                              height="82.92742608521303"
                              width="80.15496754454861"
                            >
                              <g>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  version="1.1"
                                  x="0"
                                  y="0"
                                  viewBox="17.936996459960938 18.25 64.125 66.34300231933594"
                                  enableBackground="new 0 0 100 100"
                                  width="80.15496754454861"
                                  data-fill-palette-color="accent"
                                  id="icon-0"
                                >
                                  <g data-fill-palette-color="accent">
                                    <polygon
                                      points="32.448,80.351 36.69,84.593 51.848,69.436 67.004,84.593 71.246,80.351 51.848,60.951  "
                                      data-fill-palette-color="accent"
                                    ></polygon>
                                    <path
                                      d="M77.062 27.813h-5-5-10-9.125V18.25h-20v5h-5v5h-5v5h5 5v5h9.125v19.562h30v-10h10v-10h5v-10H77.062zM40.438 30.75h-5v-5h5V30.75z"
                                      data-fill-palette-color="accent"
                                    ></path>
                                  </g>
                                </svg>
                              </g>
                            </svg>
                          </g>
                        </svg>
                      </g>
                      <defs></defs>
                    </svg>
                    <rect
                      width="395.52"
                      height="66.95941993293822"
                      fill="none"
                      stroke="none"
                      visibility="hidden"
                    ></rect>
                  </g>
                </svg>
              </g>
            </svg>
            <style>
              {`
                .lds-ellipsis {
                  display: inline-block;
                  position: absolute;
                  width: 80px;
                  height: 80px;
                  left: calc(50% - 40px);
                  top: calc(50% + 80px);
                }
                .lds-ellipsis div {
                  position: absolute;
                  top: 33px;
                  width: 13px;
                  height: 13px;
                  border-radius: 50%;
                  background: #fff;
                  animation-timing-function: cubic-bezier(0, 1, 1, 0);
                }
                .lds-ellipsis div:nth-child(1) {
                  left: 8px;
                  animation: lds-ellipsis1 0.6s infinite;
                }
                .lds-ellipsis div:nth-child(2) {
                  left: 8px;
                  animation: lds-ellipsis2 0.6s infinite;
                }
                .lds-ellipsis div:nth-child(3) {
                  left: 32px;
                  animation: lds-ellipsis2 0.6s infinite;
                }
                .lds-ellipsis div:nth-child(4) {
                  left: 56px;
                  animation: lds-ellipsis3 0.6s infinite;
                }
                @keyframes lds-ellipsis1 {
                  0% {
                    transform: scale(0);
                  }
                  100% {
                    transform: scale(1);
                  }
                }
                @keyframes lds-ellipsis3 {
                  0% {
                    transform: scale(1);
                  }
                  100% {
                    transform: scale(0);
                  }
                }
                @keyframes lds-ellipsis2 {
                  0% {
                    transform: translate(0, 0);
                  }
                  100% {
                    transform: translate(24px, 0);
                  }
                }
                `}
            </style>
            <div className="lds-ellipsis">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
            <div style={{ textAlign: "center" }}>
              Logging into Google Drive...
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default SplashScreen;
